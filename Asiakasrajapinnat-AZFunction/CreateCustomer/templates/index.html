<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Configuration Form</title>
  <!-- Link to the external CSS file under /static/css/style.css -->
  <!-- <link rel="stylesheet" href="../static/css/style.css" /> -->
  <style>
    /* Basic page layout */
    body {
    font-family: Arial, sans-serif;
    background-color: #f9f9f9;
    margin: 0;
    padding: 20px;
    }
    .container {
    max-width: 600px;
    margin: 0 auto;
    background-color: #ffffff;
    padding: 20px 30px;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #333333;
    }

    /* Form groups */
    .form-group {
    margin-bottom: 15px;
    }
    .form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: #555555;
    }
    .form-group input {
    width: 100%;
    padding: 8px 10px;
    box-sizing: border-box;
    border: 1px solid #cccccc;
    border-radius: 4px;
    font-size: 14px;
    }

    /* Fieldset styling */
    fieldset {
    border: 1px solid #cccccc;
    padding: 15px 20px;
    margin-bottom: 20px;
    border-radius: 4px;
    background-color: #fafafa;
    }
    legend {
    padding: 0 8px;
    font-weight: 600;
    color: #333333;
    }

    /* Extra-columns block styling */
    .extra-columns-group {
    margin-bottom: 12px;
    padding: 12px;
    border: 1px solid #dddddd;
    border-radius: 4px;
    background-color: #f7f7f7;
    }
    .extra-columns-group .form-group {
    margin-bottom: 8px;
    }
    .extra-columns-group label {
    font-weight: 500;
    color: #444444;
    }

    /* Buttons */
    button,
    .removeColumnBtn {
    background-color: #0078D4;
    color: #ffffff;
    border: none;
    padding: 8px 14px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    }
    button:hover,
    .removeColumnBtn:hover {
    background-color: #005A9E;
    }
    .removeColumnBtn {
    background-color: #E81123;
    margin-top: 5px;
    font-size: 13px;
    padding: 6px 10px;
    }
    .removeColumnBtn:hover {
    background-color: #C50F1F;
    }
    #addExtraColumnBtn {
    margin-top: 10px;
    font-size: 14px;
    padding: 8px 12px;
    }
    .submit-btn {
    display: block;
    width: 100%;
    margin-top: 20px;
    font-size: 16px;
    padding: 10px 0;
    border-radius: 4px;
    background-color: #0078D4;
    color: white;
    border: none;
    cursor: pointer;
    }
    .submit-btn:hover {
    background-color: #005A9E;
    }

    /* Style the dropdown (select) to match input fields */
    .form-group select {
    width: 100%;
    padding: 8px 10px;
    box-sizing: border-box;
    border: 1px solid #cccccc;
    border-radius: 4px;
    font-size: 14px;
    background-color: #ffffff;
    color: #333333;
    }

    .form-group select:focus {
    border-color: #0078D4;
    outline: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Create Customer Form</h1>

    <form id="configForm" method="post" action="">
      <!-- Customer Name -->
      <div class="form-group">
        <label for="name">Customer Name</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="e.g. yit"
          required
        />
      </div>

      <!-- Concern Numbers -->
      <div class="form-group">
        <label for="konserni">Concern Number(s)</label>
        <input
          type="text"
          id="konserni"
          name="konserni"
          placeholder="e.g. 2208, 1234"
          required
        />
        <small style="color: #666666; font-size: 12px;">
          Separate multiple numbers with commas
        </small>
      </div>

      <!-- Source Container -->
      <div class="form-group">
        <label for="src_container">Source Container</label>
        <input
          type="text"
          id="src_container"
          name="src_container"
          placeholder="e.g. testi"
          required
        />
      </div>

      <!-- Destination Container -->
      <div class="form-group">
        <label for="dest_container">Destination Container</label>
        <input
          type="text"
          id="dest_container"
          name="dest_container"
          placeholder="e.g. testi"
          required
        />
      </div>

        <!-- File Format -->
        <div class="form-group">
        <label for="file_format">File Format</label>
        <select id="file_format" name="file_format" required>
            <option value="json">JSON</option>
            <option value="csv">CSV</option>
        </select>
        </div>

      <!-- Extra Columns -->
      <fieldset>
        <legend>Extra Columns (optional)</legend>
        <!-- This wrapper will contain zero or more “.extra-columns-group” blocks -->
        <div id="extraColumnsContainer"></div>

        <!-- A template we’ll clone when “Add Column” is clicked -->
        <div
          id="extraColumnTemplate"
          class="extra-columns-group"
          style="display: none;"
        >
          <div class="form-group">
            <label>Column Key</label>
            <input
              type="text"
              name="extra_key"
              placeholder="e.g. PRTName"
            />
          </div>
          <div class="form-group">
            <label>Display Name</label>
            <input
              type="text"
              name="extra_name"
              placeholder="e.g. Asiakasryhma"
            />
          </div>
          <div class="form-group">
            <label>Data Type</label>
            <input
              type="text"
              name="extra_dtype"
              placeholder="e.g. string"
            />
          </div>
          <button type="button" class="removeColumnBtn">Remove Column</button>
        </div>

        <button type="button" id="addExtraColumnBtn">+ Add Extra Column</button>
      </fieldset>

      <!-- Exclude Columns -->
      <div class="form-group">
        <label for="exclude_columns">Exclude From Base Columns (optional)</label>
        <input
          type="text"
          id="exclude_columns"
          name="exclude_columns"
          placeholder="e.g. PARName1, TAPKaatop"
        />
        <small style="color: #666666; font-size: 12px;">
          Separate multiple column keys with commas
        </small>
      </div>

      <!-- Submit Button -->
      <button type="submit" class="submit-btn">Create Customer</button>
    </form>
  </div>

  <script>
    (function() {
      const form = document.getElementById("configForm");
      const container = document.getElementById("extraColumnsContainer");
      const template = document.getElementById("extraColumnTemplate");
      const addBtn = document.getElementById("addExtraColumnBtn");

      // On page load, clear/reset the form and ensure no extra columns are present
      window.addEventListener("DOMContentLoaded", () => {
        form.reset();
        container.innerHTML = "";
      });

      function addExtraColumn() {
        // Clone the template (deep clone), make it visible, attach a remove handler
        const clone = template.cloneNode(true);
        clone.style.display = "";
        clone.removeAttribute("id");

        // Wire up the “Remove Column” button inside this cloned block
        clone
          .querySelector(".removeColumnBtn")
          .addEventListener("click", function() {
            container.removeChild(clone);
          });

        container.appendChild(clone);
      }

      addBtn.addEventListener("click", addExtraColumn);

      // Optionally, start with one block already present:
      // addExtraColumn();
    })();
  </script>
</body>
</html>
